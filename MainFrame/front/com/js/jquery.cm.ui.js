/*	 * Name: KEPCO * Part: JavaScript for ui ＆ plug-in * Author : pk.choi */(function($){//	jQuery.noConfict();	$(document).ready(function() {				/*			 * Part: 약관동의 외부페이지로드		 */		$('#requestAgreeBox').loadExternalPage({			path:'/kepco/front/html/CY/F/A/CYFAPP001.html #wrap'		});						/*			 * Part: 모달레이어팝업		 */		$(this).on('click', '.modal_trigger', function (event) {				//prevent default action (hyperlink)			event.preventDefault ? event.preventDefault() : event.returnValue = false;//			event.preventDefault();			//Get clicked link href						var href = $(this).attr("href") + " #wrapPop";						setVisibleObjectTag('none');			if ($('.modal_overlay').length > 0) { // .modal_overlay exists//				alert('modal_overlay exists already');				$('.modal_overlay').show();			}			else { //.modal_overlay does not exist - create and insert (runs 1st time only)				//create HTML markup for lightbox window								var lightbox =				'<div class="modal_overlay"></div><div class="modal_content"></div>'								//insert lightbox HTML into page				$('body').append(lightbox);										$(".modal_overlay").css({						"zIndex":9999,								"width":$(window).width(),					"height":$(document).height(),					"min-width":980,					"opacity":"0.7"				});							}			if ($('.modal_content').children().length > 0) { // .modal_content's children exists//				alert('modal_content children exists already');				$('.modal_content').show();				$('.modal_content').find('input').eq(0).focus().select();			}			else{				$('.modal_content').show();				$('.modal_content').load(href,function() {					//				var objCont = $(this).find('#wrapPop');	  				var objCont = $(this);					var objWidth = objCont.find('#wrapPop').outerWidth();					var objHeight = objCont.find('#wrapPop').outerHeight();					var maxH = 520;	//popContainer의 내용이 보여지는 영역 기준높이					var topH = 56;	//상단 타이틀 영역 높이										objCont.css({						  	"position":"fixed",							"zIndex":10000,							"width":objWidth, 							"height":objHeight, 							"marginLeft":-objWidth/2, 							"marginTop":-objHeight/2});										/*if(navigator.appVersion.indexOf("MSIE 8") != -1){						objHeight += 4;					}else if(navigator.appVersion.indexOf("MSIE 7") != -1){						objHeight -= 1;					}*/					//console.log(objHeight);					//objHeight 가 기준높이보다 클때 popContainer에 scroll,높이값 설정 후					//modal_content의 marginTop 재설정					if(objHeight >= maxH + topH) {						$('.modal_content .popContainer').css({							"overflow-x":"hidden",							"overflow-y":"scroll",							"height":maxH						});						$('.modal_content').css({							"marginTop":-(maxH + topH)/2							});					}					objCont.find('input').eq(0).focus().select();				});			}		});					//레이어팝업닫기				$(this).on('click', 'dl.popLayout.lpop dd.close_box a', function () {						$('.modal_overlay').hide();			$('.modal_content').empty().hide();						setVisibleObjectTag('block');			return false;		});						/* 모달레이어 오픈시 바닥페이지에 동영상플레이어가 있을 경우 show/hide */		var objWmp = $('object');		var setVisibleObjectTag = function(state){			if (objWmp.length == 0) return;						if(state == 'none'){				if(detectBrowser().browser == 'Microsoft Internet Explorer')					wm_player.controls.stop();				else					wm_player2.controls.stop();			}			objWmp.css('display', state);						//console.log(detectBrowser().browser, detectBrowser().b_version);		}						//브라우저 리사이즈시 모달레이어 너비,높이조정		$(window).resize(function(){ 			if ($('.modal_overlay').length > 0) {				if($('.modal_overlay').is(':visible')){					$('.modal_overlay')					.css("width", $(window).width())					.css("height", $(document).height());				}							}		});				/*			 * Part: 윈도우팝업닫기		 */		$('dl.popLayout dd.close_box a, dl.popLayout a.close_wpop').bind('click', function () {						popClose();			return false;		});						/*			 * Part: FAQ 리스트 토글		 */		$('.faq_list li>a').bind('click', function () {						if($(this).parent().hasClass('on')){				$(this).parent().removeClass('on');				$(this).children(".open").html("닫힘");					$(this).children(".open").addClass("close");				$(this).children(".open").removeClass("open");			}else{				$('.faq_list li').removeClass('on');				$(this).parent().addClass('on');				$(this).children(".close").html("열림");				$(this).children(".close").addClass("open");				$(this).children(".close").removeClass("close");			}		});						/*			 * Part: LNB 전국사업소 리스트 레이어		 */		$('.office_more > a').bind('click', function () {						$('.office_list').show();			return false;		});					$('.office_list > a').bind('click', function () {						$('.office_list').hide();			return false;		});								/*			 * Part: 사이버지점 캐릭터 뉴스레터 lnb focus		 */		$('.lnb_account ul.list_lnb_account > li').on('focusin',function(){			if(!$(this).hasClass('on'))				$(this).addClass('hover');		}).on('focusout',function(){			if(!$(this).hasClass('on'))				$(this).removeClass('hover');		});						/*			 * Part: 사이버지점(법인기준) - 조회/납부 청구서보는법 툴팁 		 */		$('.blue_btn a.blBtn').on('click',function(){						var $bl_text_box = $(this).parent().find('.bl_text_box');			if($bl_text_box.hasClass('hide')){				$('.blue_btn .bl_text_box').addClass('hide');				$bl_text_box.removeClass('hide');				$('.blue_btn a.blBtn').removeClass('blBtn_on');				$(this).addClass('blBtn_on');			}else{				$bl_text_box.addClass('hide');				$(this).removeClass('blBtn_on');			}						});		 		 /*PR today_list, monthly_list*/		 $('.kepco_layer').on('click', function (event) {									event.preventDefault ? event.preventDefault() : event.returnValue = false;				 href = $(this).attr("href") + "#wrapLayer";						layerDiv = '<div class="layerDiv"></div>';			$('.pr .conSection').append(layerDiv);				$('.layerDiv').load(href, function(){				$('.btn_close').click(function(){					$('.layerDiv').remove();					return false;				})			});			});				/*스마트 그리드*/		var objImgLi = $('.img_paging li');		var objImgBtn = $('.img_paging li a');					$('.img_paging li.on').append('<span class="bg_arrow"></span>');						objImgBtn.bind('click', function(){				if	(!$(this).parent().is('.btn_prev, .btn_next')){					objImgLi.removeClass('on');					$('.bg_arrow').remove();					$(this).parent().not('.btn_prev, .btn_next').addClass('on');					$(this).parent().not('.btn_prev, .btn_next').append('<span class="bg_arrow"></span>');					return false;				}							})				/*전기요금계산기*/			layerFn();		/*전기박물관*/		electMuseum();		/*footer family_site*/		footerFamily();		/*전국사업소 지도검색*/		mapImg();		/*지식센터 메인*/		knowledgeMain();		/*지식센터 용어사전*/		findTerm();			});//end : document ready	var footerFamily = function(){	var objFamilySite = $('.family_site');	var objFamilySiteA = $('.family_site a');	var objFooterInfoUl = $('.footer_info ul');	var objFamily = $('.util_menu>li.family');	var objFamilyA = $('.util_menu>li.family>a');	var objFamilySiteLastA = $('.family_site dd:last-child li:last-child a');	objFamilySite.hide();		objFamily.bind('click', function(){		$(this).find('.family_site').show()	});	objFamily.bind('mouseleave', function(){		$(this).find('.family_site').hide()	});	objFamilyA.bind('focus', function(){		$(this).next().show();		});	objFamilySiteLastA.focusout(function(){		objFamilySite.hide();	});}	/* 전기요금계산기 */	var layerFn = function(){		var btnGo = $('#container_calcul .btn_set.btnRe.goto');		var btnUse = $('.btn_contract a');		var btnGraph = $('.btn_set.btnBge');		var layer = $('.layer_calculator');		var layer2 = $('.layer_calculator2');		var layerClose = $('.layer_calculator .btn_close_calcul');		var layerClose2 = $('.layer_calculator2 .btn_close_calcul');		var btnUseList = $('.list_contract');			$('.list_contract').hide();				btnGo.click(function(){			layer.show();		});				layerClose.click(function(){			layer.hide();		});				layerClose2.click(function(){			layer2.hide();			layer.show();			btnGraph.focus();		});			btnUse.bind('mouseenter focus', function(){			btnUseList.show();			$('.tit_calculator div.btn_contract a').css({'background': 'url(/kepco/front/img/cyber/btn_layertop_on.jpg) no-repeat left 0'});		});		btnUse.bind('mouseleave blur', function(){			hideDelay = setTimeout(function(){btnUseList.hide();}, 0);			$('.tit_calculator div.btn_contract a').css({'background': 'url(/kepco/front/img/cyber/btn_layertop_off.jpg) no-repeat right 1px'});		});				btnUseList.bind('mouseenter focus', function(){			btnUse.trigger('mouseenter')				clearTimeout(hideDelay);		});				btnUseList.bind('mouseleave blur', function(){			btnUse.trigger('mouseleave')			})				btnGraph.click(function(){			layer2.show();			$('.box_payTip .btn_set.btnSv').focus();		});	}/*지식센터 용어사전*/var findTerm = function(){	var objBtnDic = $('.btn_dic');	var objBtnDicKorLi = $('.btn_dic .btn_kor li');	var objBtnDicEnLi = $('.btn_dic .btn_en li');	var objBtnNum = $('.btn_dic .btn_num li')		objBtnDicKorLi.click(function(){		objBtnDicKorLi.removeClass('on');		$(this).addClass('on');	})		objBtnDicEnLi.click(function(){		objBtnDicEnLi.removeClass('on');		$(this).addClass('on');	})	objBtnNum.click(function(){		objBtnNum.removeClass('on');		$(this).addClass('on');	})}var electMuseum = function(){	var	objArcodianList = $('.arcodian_list');	var	objArcodianDtA = $('.arcodian_list dt a');	var	objArcodianDd = $('.arcodian_list dd');	objArcodianDtA.click(function(){		var thisParent = $(this).parent();		var intThisParentHeight = thisParent.outerHeight();		var intArcodianDdHeight = thisParent.next().find('>div').outerHeight();				if($(this).parent().hasClass('on')){			$(this).parent().removeClass('on');			objArcodianDd.animate({height : 0});		}else {			objArcodianDtA.parent().removeClass('on');			objArcodianDd.animate({height : 0})			thisParent.addClass('on').next()				.animate({'height': intArcodianDdHeight},					function(){						$('html, body').animate({scrollTop: thisParent.position().top - (intThisParentHeight * 2)});					}				);		}						return false;	});		var objTabTitA = $('.elect_museum_h .tab_tit a');	var objTabCont = $('.elect_museum_h .tab_cont');	var intTabTitAHeight = objTabTitA.height();		objTabCont.not(':eq(0)').hide();		objTabTitA.each(function(index){		$(this).css({top:intTabTitAHeight * index });				$(this).click(function(){			objTabCont.hide();			objTabCont.eq(index).show();		});	});}	/*		 * Part: loadExternalPage plug-in	 */		$.fn.loadExternalPage = function(options){		var 			defaults = {				path:''			},			settings = $.extend({}, defaults, options);						this.each(function(){								//				var $this = $(this);								//Default Action				$(this).load(settings.path);						});						return this;	}})(jQuery);/*전국사업소 지도검색*/var mapImg = function(){	var objMap = $('map area');	var objMapImg = $('.img_cymbpp005>img')	;	var prevsrc = objMapImg.attr('src');		objMap.on({		'mouseenter focusin':function(){			var index = $(this).index();			objMapImg.attr('src', '/kepco/front/img/customer/img_cuibpp003_'+(index+1)+'.gif');		}		,'mouseleave focusout':function(){			objMapImg.attr('src', prevsrc);		}	});}/*지식센터 메인*/var knowledgeMain = function(){	var objcolumnOn = $('.knowledge_submain .column .on');		objcolumnOn.hide();		//각 원형패널에 mouseenter,mouseleave되었을때	$('.knowledge_submain .wrap_column').on({		'mouseenter':function (event) {			if($(this).hasClass('coltype1'))								$(this).find('.default').hide();			else				$(this).find('.default2').hide();			$(this).find('.on').show();			}		,'mouseleave':function (event) {			if($(this).hasClass('coltype1'))				$(this).find('.default').show();			else				$(this).find('.default2').show();			$(this).find('.on').hide();					}	}, '.column');			//각 원형패널에 focusin되었을때	$('.knowledge_submain .wrap_column .column').on({		'focusin':function (event) {			$(this).parent().hide();			$(this).parent().next().show();		}	}, '.default a, .default2 a');		//각 원형패널의 sns링크중 마지막링크에서 focusout되었을때	$('.knowledge_submain .wrap_column .column .on .sns').on({		'focusout':function (event) {			$(this).parent().parent().hide();			$(this).parent().parent().prev().show();		}	}, 'a:last');			//create masonry plugin	if($('.knowledge_submain .wrap_column').length > 0){		$('.wrap_column').masonry({			itemSelector: '.column'			,isAnimated: true			,isFitWidth: true			,columnWidth: 190		});	}	}//-----------------------------------------------/*****       WINDOW POPUP ALIGN CENTER      *****///-----------------------------------------------function open_window(name, url, w, h, toolbar, menubar, statusbar, scrollbar, resizable, loc_box){  toolbar_str = toolbar ? 'yes' : 'no';  menubar_str = menubar ? 'yes' : 'no';  statusbar_str = statusbar ? 'yes' : 'no';  scrollbar_str = scrollbar ? 'yes' : 'no';  resizable_str = resizable ? 'yes' : 'no';  var left = 0;  var top = 0;    left = (screen.availWidth - w) / 2;  top = (screen.availHeight - h) / 2;  win = window.open(url, name, 'left='+left+',top='+top+',width='+w+',height='+h+',toolbar='+toolbar_str+',menubar='+menubar_str+',status='+statusbar_str+',scrollbars='+scrollbar_str+',resizable='+resizable_str);  //win.focus();}/*  POPUP CLOSE */function popClose(){	if(navigator.appVersion.indexOf("MSIE 6") != -1){		window.opener = window.location.href;  self.close();	}else {		parent.window.open('about:blank','_self').close();	}}//------------------------------------/*****        레이어 변환      *****///------------------------------------function ch_layer(hidden , show){  	var hl  = document.getElementById(hidden);	var sl  = document.getElementById(show);		hl.style.display = "none";	sl.style.display = "";			}//------------------------------------/*****      browser detect      *****///------------------------------------function detectBrowser(){	var browser     = navigator.appName;    var agent       = navigator.userAgent;    var b_version   = navigator.appVersion;    var reg;    var obj;    if(agent.indexOf("Chrome") != -1) {        browser = "Chrome";        reg = /Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent);        b_version = new Number(RegExp.$1);    } else if(agent.indexOf("MSIE") != -1) {        browser = "Microsoft Internet Explorer";        reg = /MSIE (\d+\.\d+);/.test(navigator.userAgent);        b_version = new Number(RegExp.$1);        } else if(agent.indexOf("Firefox") != -1) {        browser = "Firefox";        reg = /Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent);        b_version = new Number(RegExp.$1);    } else if(agent.indexOf("Opera") != -1) {        browser = "Opera";        reg = /Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent);        b_version = new Number(RegExp.$1);    } else if(agent.indexOf("Safari") != -1) {        browser = "Safari";        reg = /Safari[\/\s](\d+\.\d+)/.test(navigator.userAgent);        b_version = new Number(RegExp.$1);    }        obj = {'browser':browser			,'agent':agent			,'b_version':b_version};        return obj;}